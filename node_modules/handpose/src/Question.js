import React, { useEffect, useState, useRef } from "react";
import Proctor from "./Proctor";
function Question() {
  const [personMissing, setPersonMissing] = useState(false);
  const [isMoreThanOnePerson, setIsMoreThanOnePerson] = useState(false);
  const [mobilePhone, setMobilePhone] = useState(false);
  const [warning, setWarnings] = useState(0);
  const [image, setImage] = useState("");

  useEffect(() => {
    console.log(warning);
    if (warning > 5) {
      //Do Something
    }
  });

  const useDidMountEffect = (func, deps) => {
    const didMount = useRef(false);

    useEffect(() => {
      if (didMount.current) func();
      else didMount.current = true;
    }, deps);
  };

  useDidMountEffect(() => {
    setWarnings(warning + 1);
    console.log("Person Missing");
    setPersonMissing(false);
  }, [personMissing]);

  useDidMountEffect(() => {
    setWarnings(warning + 1);
    console.log("More Than One Person");
    setPersonMissing(false);
  }, [isMoreThanOnePerson]);

  useDidMountEffect(() => {
    setWarnings(warning + 1);
    console.log("Mobile Phone Detected");
    setMobilePhone(false);
  }, [mobilePhone]);

  useEffect(() => {
    console.log(image);
  }, [image]);

  return (
    <div>
      <Proctor
        setPersonMissing={setPersonMissing}
        setIsMoreThanOnePerson={setIsMoreThanOnePerson}
        setImage={setImage}
      />
    </div>
  );
}

export default Question;
